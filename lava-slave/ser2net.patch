Only in .: .libs
Only in .: Makefile
Only in .: buffer.o
Only in .: config.log
Only in .: config.status
Only in .: controller.o
Only in .: dataxfer.o
diff -ru ../ser2net-3.5.orig/devcfg.c ./devcfg.c
--- ../ser2net-3.5.orig/devcfg.c	2017-10-23 14:43:23.000000000 +0200
+++ ./devcfg.c	2018-10-25 10:44:33.014255783 +0200
@@ -67,6 +67,8 @@
 #if HAVE_DECL_TIOCSRS485
     struct serial_rs485 *conf;
 #endif
+
+    int open_timeout;
 };
 
 static struct baud_rates_s {
@@ -589,6 +591,8 @@
 	    d->disablebreak = 1;
 	} else if (strcmp(pos, "-NOBREAK") == 0) {
 	    d->disablebreak = 0;
+	} else if (strncmp(pos, "KEEPTRYOPEN=", 12) == 0) {
+	    d->open_timeout = strtoul(pos + 12, NULL, 10);
 	} else {
 	    if (otherconfig(data, eout, pos) == -1)
 		goto out;
@@ -894,6 +898,7 @@
     struct devcfg_data *d = io->my_data;
     int options;
     int rv;
+    int timeout = d->open_timeout;
 
     rv = uucp_mk_lock(io->devname);
     if (rv > 0 ) {
@@ -918,7 +923,13 @@
     } else {
 	options |= O_RDWR;
     }
-    d->devfd = open(io->devname, options);
+    do {
+    	d->devfd = open(io->devname, options);
+	if (d->devfd == -1) {
+		/*printf("Keep try open %d\n", timeout);*/
+		usleep(10000);
+	}
+    } while (d->devfd == -1 && timeout-- > 0);
     if (d->devfd == -1) {
 	syslog(LOG_ERR, "Could not open device %s for port %s: %m",
 	       io->devname,
Only in .: devcfg.o
Only in .: led.o
Only in .: led_sysfs.o
Only in .: libtool
Only in .: readconfig.o
Only in .: selector.o
Only in .: ser2net
diff -ru ../ser2net-3.5.orig/ser2net.8 ./ser2net.8
--- ../ser2net-3.5.orig/ser2net.8	2017-10-24 15:00:13.000000000 +0200
+++ ./ser2net.8	2018-10-25 10:43:45.663960461 +0200
@@ -303,6 +303,10 @@
 then it will be silently set to ODD or EVEN parity.
 .I 1STOPBIT, 2STOPBITS
 set the number of stop bits. (serial device only)
+.I KEEPTRYOPEN=x
+Keep try to open the device for x ms.
+This is usefull for hardware which have an embeded UART which take some time to bring up.
+So you can telnet 
 .I 5DATABITS, 6DATABITS, 7DATABITS, 8DATABITS
 set the number of data bits. (serial device only)
 .I [-]XONXOFF
Only in .: ser2net.o
Only in .: sol.o
Only in .: telnet.o
Only in .: utils.o
